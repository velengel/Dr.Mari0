# Dr. Mari0 - p5.js Remake

これは、C++のopenFrameworksプロジェクトを[p5.js](https://p5js.org/)を使用してブラウザで動作するようにリメイクした、古典的なパズルゲーム「ドクターマリオ」のクローンです。プレイヤーは色付きのカプセルを操作して、同じ色を4つ以上並べてウイルスを消していきます。

## 主な機能

-   ブラウザで動作するドクターマリオのゲームプレイ
-   カプセルの移動、回転、落下操作
-   ウイルスとカプセルの消去、重力による落下、連鎖
-   スコア、残りウイルス数、次のカプセル表示
-   ゲームオーバー、ゲームクリアの判定と表示
-   BGMと効果音

## 遊び方

このゲームはWebブラウザで動作します。プレイするには、ローカルWebサーバーを起動する必要があります。

1.  プロジェクトのルートディレクトリ（`Dr.Mari0`）で、ローカルWebサーバーを起動します。Pythonがインストールされている場合、以下のコマンドが便利です。
    ```bash
    python3 -m http.server
    ```
    Node.jsがインストールされている場合は、`npx serve`も利用できます。
3.  Webサーバーが起動したら、ブラウザで `http://localhost:8000` （またはサーバーが示すアドレス）にアクセスしてください。

## 操作方法

-   `←` `→` キー: カプセルの左右移動
-   `↓` キー: ソフトドロップ（カプセルの落下速度を上げる）
-   `Z` または `X` キー: カプセルの回転（色も入れ替わります）

## プロジェクト構造

-   `new/`: p5.jsリメイクプロジェクトのルートディレクトリ
    -   `index.html`: ゲームのエントリーポイントとなるHTMLファイル
    -   `sketch.js`: すべてのゲームロジック、描画、p5.jsのライフサイクル関数を含むメインスクリプト
    -   `assets/`: ゲームで使用するアセット（画像、サウンド）
        -   `images/`: ウイルス画像 (`rvirus.png`, `yvirus.png`, `bvirus.png`)
        -   `sounds/`: 効果音とBGM (`vsvirus.wav`, `move.wav`, `rot.wav`, `set.wav`, `erase.wav`)
    -   `favicon.png`: ブラウザのタブに表示されるアイコン
    -   `tests/`: 単体テスト関連ファイル
        -   `test-runner.html`: QUnitテストを実行するためのHTMLファイル
        -   `tests.js`: ゲームロジックの単体テストコード

## 開発ノート

-   **フレームワーク:** [p5.js](https://p5js.org/) を使用しています。
-   **テスト:** [QUnit](https://qunitjs.com/) を使用して、主要なゲームロジックの単体テストを実装しています。テストは `new/tests/test-runner.html` で実行できます。