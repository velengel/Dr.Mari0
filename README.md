# Dr. Mari0 - p5.js Remake

これは、C++のopenFrameworksプロジェクトを[p5.js](https://p5js.org/)を使用してブラウザで動作するようにリメイクした、古典的なパズルゲーム「ドクターマリオ」のクローンです。プレイヤーは色付きのカプセルを操作して、同じ色を4つ以上並べてウイルスを消していきます。

## 主な機能

-   ブラウザで動作するドクターマリオのゲームプレイ
-   カプセルの移動、回転、落下操作
-   ウイルスとカプセルの消去、重力による落下、連鎖
-   スコア、残りウイルス数、次のカプセル表示
-   ゲームオーバー、ゲームクリアの判定と表示
-   BGMと効果音

## 遊び方

このゲームはWebブラウザで動作します。プレイするには、ローカルWebサーバーを起動する必要があります。

1.  プロジェクトのルートディレクトリ（`Dr.Mari0`）から`docs`ディレクトリに移動します。
    ```bash
    cd docs
    ```
2.  ローカルWebサーバーを起動します。Pythonがインストールされている場合、以下のコマンドが便利です。
    ```bash
    python3 -m http.server
    ```
    Node.jsがインストールされている場合は、`npx serve`も利用できます。
3.  Webサーバーが起動したら、ブラウザで `http://localhost:8000` （またはサーバーが示すアドレス）にアクセスしてください。

## 操作方法

-   `←` `→` キー: カプセルの左右移動
-   `↓` キー: ソフトドロップ（カプセルの落下速度を上げる）
-   `Z` または `X` キー: カプセルの回転（色も入れ替わります）

## テストの実行方法

このプロジェクトはQUnitによる単体テストを備えています。テストを実行するには、ローカルWebサーバーを起動し、ブラウザでテストページにアクセスする必要があります。

1.  プロジェクトのルートディレクトリで、以下のコマンドを実行してWebサーバーを起動します。
    ```bash
    python3 -m http.server
    ```
2.  Webサーバーが起動したら、ブラウザで `http://localhost:8000/tests/test-runner.html` にアクセスしてください。

## プロジェクト構造

-   `docs/`: GitHub Pagesで公開されるWeb関連ファイル一式。
    -   `index.html`: ゲームのエントリーポイントとなるHTMLファイル。
    -   `sketch.js`: ゲームのロジック、描画などを含むメインスクリプト。
    -   `assets/`: ゲームで使用する画像や音声ファイル。
-   `old/`: 旧バージョンであるopenFrameworks(C++)のソースコード一式。
-   `tests/`: QUnitによる単体テスト関連のファイル。
-   `dialy/`: 作業日報ファイル。

## 開発ノート

-   **フレームワーク:** [p5.js](https://p5js.org/) を使用しています。
-   **テスト:** [QUnit](https://qunitjs.com/) を使用して、主要なゲームロジックの単体テストを実装しています。